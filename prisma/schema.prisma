// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

model User {
  id     Int     @id @default(autoincrement())
  nama   String?
  alamat String
  no_hp  String

  email     String      @unique
  createdAt DateTime    @default(now())
  updatedAt DateTime    @updatedAt
  Transaksi Transaksi[]
  Material  Material[]
}

model Transaksi {
  id            Int       @id @default(autoincrement())
  tgl_transaksi DateTime
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt
  id_user       Int?
  id_material   Int?
  User          User?     @relation(fields: [id_user], references: [id])
  Material      Material? @relation(fields: [id_material], references: [id])

  status_Transaksi Status_Transaksi?
  opsi_Penukaran   Opsi_Penukaran?
}

model Status_Transaksi {
  id           Int       @id @default(autoincrement())
  type         String
  id_transaksi Int       @unique
  Transaksi    Transaksi @relation(fields: [id_transaksi], references: [id])
  createdAt    DateTime  @default(now())
  updatedAt    DateTime  @updatedAt
}

model Opsi_Penukaran {
  id           Int       @id @default(autoincrement())
  harga        Int?
  berat        Int
  deskripsi    String
  id_transaksi Int       @unique
  Transaksi    Transaksi @relation(fields: [id_transaksi], references: [id])
  createdAt    DateTime  @default(now())
  updatedAt    DateTime  @updatedAt
}

// model Riwayat_Penukaran {
//   id           Int       @id @default(autoincrement())
//   tgl_tukar    DateTime
//   id_transaksi Int       @unique
//   Transaksi    Transaksi @relation(fields: [id_transaksi], references: [id])
//   createdAt    DateTime  @default(now())
// }

// model Status_Penukaran {
//   id        Int         @id @default(autoincrement())
//   type      String //['SIMPAN','PROCESS','SELESAI']
//   Transaksi Transaksi[]
// }

// model Riwayat_Transaksi {
//   id           Int        @id @default(autoincrement())
//   tgl_tukar    DateTime
//   id_transaksi Int?       @unique
//   Transaksi    Transaksi? @relation(fields: [id_transaksi], references: [id])
// }

//
// model Sampah_Transaksi {
//   id           Int @id @default(autoincrement())
//   // nama         String
//   total_berat  Int // bukan jumlah per satuan / berat yang akan di beli
//   total_harga  Int
//   // id_transaksi Int?
//   // Sampah    Sampah?    @relation(fields: [id_Sampah], references: [id])
//   // Transaksi    Transaksi? @relation(fields: [id_transaksi], references: [id])
//   id_Transaksi Int @unique
//
//   Transaksi Transaksi @relation(fields: [id_Transaksi], references: [id])
// }

model Material {
  id        Int         @id @default(autoincrement())
  nama      String
  berat     Int // total semua benda yang di simpan dalam gudang
  jenis     String // total semua benda yang di simpan dalam gudang
  id_user   Int?
  User      User?       @relation(fields: [id_user], references: [id])
  Transaksi Transaksi[]
  createdAt DateTime    @default(now())
  updatedAt DateTime    @updatedAt
}

// model Sampah {
//   id               Int                @id @default(autoincrement())
//   nama             String
//   Sampah_Transaksi Sampah_Transaksi[]
// }

//

// enum StatusTransaksi {
//   SIMPAN
//   PROSES
//   SELESAI
// }
